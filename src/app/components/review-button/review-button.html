<section class="max-w-md mx-auto mt-12 p-6 bg-gray-50 rounded-lg shadow text-center">
  <h2 class="text-2xl font-semibold mb-2">Valorar el producto</h2>
  <p class="text-gray-700 mb-6">Comparte tu opinión con otros clientes</p>

  <!-- Botón para mostrar el formulario -->
  <button
    *ngIf="!showForm && !message"
    (click)="handleWriteReview()"
    class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded"
  >
    Escribir mi opinión
  </button>

  <!-- Formulario -->
  <form *ngIf="showForm" (ngSubmit)="handleSubmit()" #reviewForm="ngForm">
    <input
      name="userName"
      type="text"
      placeholder="Tu nombre"
      [(ngModel)]="userName"
      class="w-full mb-4 border rounded p-2"
      required
    />

    <app-star-rating
      [rating]="rating"
      (ratingChange)="rating = $event"
    ></app-star-rating>

    <textarea
      name="review"
      rows="4"
      placeholder="Escribe tu opinión..."
      [(ngModel)]="review"
      class="w-full mb-4 border rounded p-2"
      required
    ></textarea>

    <button
      type="submit"
      class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded"
      [disabled]="!reviewForm.form.valid || rating === 0"
    >
      Enviar Opinión
    </button>
  </form>

  <!-- Mensajes y botón para escribir otra opinión -->
  <div *ngIf="message" class="mt-4">
    <p class="text-green-700 font-semibold">{{ message }}</p>
    <button
      *ngIf="!showForm"
      (click)="handleWriteReview()"
      class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded"
    >
      Escribir otra opinión
    </button>
  </div>
</section>

